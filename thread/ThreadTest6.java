package com.bjpowernode.java2.thread;
/*
    ÂÆûÁé∞Á∫øÁ®ãÂêåÊ≠•
    1„ÄÅÈóÆÈ¢òÔºöÂçñÁ•®ËøáÁ®ã‰∏≠Âá∫Áé∞ÈáçÁ•®„ÄÅÈîôÁ•®-->Âá∫Áé∞‰∫ÜÁ∫øÁ®ãÁöÑÂÆâÂÖ®ÈóÆÈ¢ò
    2„ÄÅÈóÆÈ¢òÂá∫Áé∞ÂéüÂõ†:ÂΩìÊüê‰∏™Á∫øÁ®ãÊìç‰ΩúËΩ¶Á•®ÁöÑËøáÁ®ã‰∏≠ÔºåÂ∞öÊú™Êìç‰ΩúÂÆåÊàêÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂèÇ‰∏éËøõÊù•Ôºå‰πüÊìç‰ΩúËΩ¶Á•®
    3„ÄÅÊÄé‰πàËß£ÂÜ≥?Âä†‰∏Ä‰∏™ÈîÅüîí.ÂΩìÁ∫øÁ®ãAÂú®Êìç‰ΩústaticÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ã‰∏çËÉΩÂèÇ‰∏éËøõÊù•ÔºåÁõ¥Âà∞Á∫øÁ®ãAÊìç‰ΩúÂÆåticketÊó∂ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÊâçËÉΩÂèÇ‰∏éËøõÊù•
ËøôÁßçÊÉÖÂÜµÂç≥‰ΩøÁ∫øÁ®ãAÂá∫Áé∞ÈòªÂ°û‰πü‰∏çËÉΩÊîπÂèò
    4„ÄÅÂú®java‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÂêåÊ≠•Êú∫Âà∂Ëß£ÂÜ≥Á∫øÁ®ãÁöÑÂÆâÂÖ®ÈóÆÈ¢ò
        ÊñπÂºè‰∏Ä:ÂêåÊ≠•‰ª£Á†ÅÂùó:
        synchronized(ÂêåÊ≠•ÁõëËßÜÂô®){
            ÈúÄË¶ÅË¢´ÂêåÊ≠•ÁöÑ‰ª£Á†Å;
        }
        ËØ¥Êòé:Êìç‰ΩúÂÖ±‰∫´Êï∞ÊçÆÁöÑ‰ª£Á†ÅÔºåÂç≥‰∏∫ÈúÄË¶ÅË¢´ÂêåÊ≠•ÁöÑ‰ª£Á†Å
            ÂÖ±‰∫´Êï∞ÊçÆ:Â§öÊï∞Á∫øÁ®ãÂÖ±ÂêåÊìç‰ΩúÁöÑÁöÑÂèòÈáè„ÄÇÂ¶ÇÊú¨‰æã‰∏≠ticketÂ∞±ÊòØÂÖ±‰∫´Êï∞ÊçÆ
            ÂêåÊ≠•ÁõëËßÜÂô®:‰øóÁß∞ÈîÅüîí.‰ªª‰Ωï‰∏Ä‰∏™Á±ªÁöÑÂØπË±°ÈÉΩÂèØ‰ª•ÂÖÖÂΩìÈîÅ
            ÈîÅÁöÑË¶ÅÊ±Ç:Â§ö‰∏™Á∫øÁ®ãÂøÖÈ°ªÂÖ±ÊúâÂêå‰∏ÄÊääÈîÅ

            ÈîÅÁöÑÂÖ∂‰ªñ

        ÊñπÂºè‰∫å:ÂêåÊ≠•ÊñπÊ≥ï:
            Â¶ÇÊûúÊìç‰ΩúÂÖ±‰∫´Êï∞ÊçÆÁöÑ‰ª£Á†ÅÂÆåÊï¥Âú∞Â£∞ÊòéÂú®‰∏Ä‰∏™ÊñπÊ≥ï‰∏≠Ôºå‰∏çÂ¶®Â∞ÜÊ≠§ÊñπÊ≥ïÂ£∞Êòé‰∏∫ÂêåÊ≠•ÁöÑ
            ËßÅThreadTest8

    5„ÄÅÂ•ΩÂ§Ñ:ÂêåÊ≠•ÁöÑÊñπÂºèÔºåËß£ÂÜ≥‰∫ÜÁ∫øÁ®ãÁöÑÂÆâÂÖ®ÈóÆÈ¢ò
        Â±ÄÈôêÊÄß:Êìç‰ΩúÂêåÊ≠•‰ª£Á†ÅÊó∂Âè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂèÇ‰∏éÔºåÂÖ∂‰ªñÁ∫øÁ®ãÁ≠âÂæÖÔºåÂÜÖÈÉ®Áõ∏ÂΩì‰∫éÊòØ‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÁöÑËøáÁ®ãÔºåÊïàÁéáËæÉ‰Ωé
 */
public class ThreadTest6 {
    public static void main(String[] args) {
        Window2 w1 = new Window2();
        Thread t1 = new Thread(w1);
        Thread t2 = new Thread(w1);
        Thread t3 = new Thread(w1);
        t1.setName("Á∫øÁ®ã1");
        t2.setName("Á∫øÁ®ã2");
        t3.setName("Á∫øÁ®ã3");
        t1.start();
        t2.start();
        t3.start();
    }
}


class Window2 implements Runnable{
    private int ticket = 100;
    Object obj = new Object();  //ÂàõÂª∫‰∏Ä‰∏™ÂØπË±°‰Ωú‰∏∫ÈîÅ
    @Override
    public void run() {
        // Object obj = new Object();objÁöÑÂ£∞ÊòéÊîæÂú®ËøôÈáå‰∏çÂÆâÂÖ®ÔºåÊ≠§Êó∂ÊØè‰∏™Á∫øÁ®ãÂ§öÊúâÂ±û‰∫éËá™Â∑±Áã¨Ëá™ÁöÑÈîÅ
        while (true){
            //synchronized(obj){
            synchronized(this){         //ËøôÈáåÁöÑthis‰ª£Ë°®ÁöÑw1ÂØπË±°ÔºåËøôÈáåÊòØÂä®ÊÄÅËé∑ÂèñÁöÑÔºåw1ÊòØÂîØ‰∏ÄÁöÑ(ËøôÊòØÊúÄÊñπ‰æøÁöÑÂØπË±°)
                if (ticket > 0){
                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    System.out.println(Thread.currentThread().getName() + ":ÂçñÁ•®ÔºåÁ•®Âè∑‰∏∫:" + ticket);
                    ticket --;
                }else {
                    break;
                }
            }
        }
    }
}